{'role': 'assistant', 'content': 'Now, let\'s create the email verification class:\n\n<function_calls>\n<create-file file_path="website/StudentPlatform/backend/email_verification.php">\n<?php\nrequire_once __DIR__ . \'/../config/database.php\';\n\nclass EmailVerification {\n    private $conn;\n    \n    public function __construct() {\n        $this->conn = getDBConnection();\n    }\n    \n    // Generate a random verification code\n    public function generateVerificationCode($length = 6) {\n        return substr(str_shuffle("0123456789"), 0, $length);\n    }\n    \n    // Store verification code in database\n    public function storeVerificationCode($user_id, $email, $code) {\n        // Set expiration time (24 hours from now)\n        $expires_at = date(\'Y-m-d H:i:s\', strtotime(\'+24 hours\'));\n        \n        // Delete any existing codes for this user\n        $stmt = $this->conn->prepare("DELETE FROM verification_codes WHERE user_id = ?");\n        $stmt->bind_param("i", $user_id);\n        $stmt->execute();\n        \n        // Insert new code\n        $stmt = $this->conn->prepare("INSERT INTO verification_codes (user_id, email, code, expires_at) VALUES (?, ?, ?, ?)");\n        $stmt->bind_param("isss", $user_id, $email, $code, $expires_at);\n        return $stmt->execute();\n    }\n    \n    // Verify code\n    public function verifyCode($user_id, $code) {\n        $stmt = $this->conn->prepare("SELECT * FROM verification_codes WHERE user_id = ? AND code = ? AND expires_at > NOW()");\n        $stmt->bind_param("is", $user_id, $code);\n        $stmt->execute();\n        $result = $stmt->get_result();\n        \n        if ($result->num_rows === 1) {\n            // Mark email as verified\n            $stmt = $this->conn->prepare("UPDATE users SET email_verified = TRUE WHERE id = ?");\n            $stmt->bind_param("i", $user_id);\n            $stmt->execute();\n            \n            // Delete the verification code\n            $stmt = $this->conn->prepare("DELETE FROM verification_codes WHERE user_id = ?");\n            $stmt->bind_param("i", $user_id);\n            $stmt->execute();\n            \n            return true;\n        }\n        \n        return false;\n    }\n    \n    // Send verification email (simulated for this example)\n    public function sendVerificationEmail($email, $username, $code) {\n        // In a real application, you would send an actual email here\n        // For this example, we\'ll just return true to simulate success\n        return true;\n    }\n}\n?>\n</create-file>\n</function_calls>'}