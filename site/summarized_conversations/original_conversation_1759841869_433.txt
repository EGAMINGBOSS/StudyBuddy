{'role': 'assistant', 'content': 'Now, let\'s create the registration page:\n\n<function_calls>\n<create-file file_path="website/StudentPlatform/register.php">\n<?php\n// Initialize the session\nsession_start();\n\n// Check if the user is already logged in, if yes then redirect to welcome page\nif(isset($_SESSION["loggedin"]) && $_SESSION["loggedin"] === true) {\n    header("location: welcome.php");\n    exit;\n}\n\n// Include database connection\nrequire_once "config/database.php";\nrequire_once "backend/auth.php";\n\n// Define variables and initialize with empty values\n$username = $email = $password = $confirm_password = $full_name = "";\n$username_err = $email_err = $password_err = $confirm_password_err = $full_name_err = "";\n\n// Processing form data when form is submitted\nif($_SERVER["REQUEST_METHOD"] == "POST") {\n    \n    // Validate username\n    if(empty(trim($_POST["username"]))) {\n        $username_err = "Please enter a username.";\n    } elseif(strlen(trim($_POST["username"])) < 3) {\n        $username_err = "Username must have at least 3 characters.";\n    } else {\n        $username = trim($_POST["username"]);\n    }\n    \n    // Validate email\n    if(empty(trim($_POST["email"]))) {\n        $email_err = "Please enter an email.";\n    } elseif(!filter_var(trim($_POST["email"]), FILTER_VALIDATE_EMAIL)) {\n        $email_err = "Please enter a valid email address.";\n    } else {\n        $email = trim($_POST["email"]);\n    }\n    \n    // Validate password\n    if(empty(trim($_POST["password"]))) {\n        $password_err = "Please enter a password.";     \n    } elseif(strlen(trim($_POST["password"])) < 6) {\n        $password_err = "Password must have at least 6 characters.";\n    } else {\n        $password = trim($_POST["password"]);\n    }\n    \n    // Validate confirm password\n    if(empty(trim($_POST["confirm_password"]))) {\n        $confirm_password_err = "Please confirm password.";     \n    } else {\n        $confirm_password = trim($_POST["confirm_password"]);\n        if(empty($password_err) && ($password != $confirm_password)) {\n            $confirm_password_err = "Password did not match.";\n        }\n    }\n    \n    // Get full name (optional)\n    $full_name = trim($_POST["full_name"] ?? "");\n    \n    // Check input errors before inserting in database\n    if(empty($username_err) && empty($email_err) && empty($password_err) && empty($confirm_password_err)) {\n        \n        // Create Auth instance\n        $auth = new Auth();\n        \n        // Attempt to register the user\n        $result = $auth->register($username, $email, $password, $full_name);\n        \n        if($result[\'success\']) {\n            // Store user info for verification\n            $_SESSION["verification_user_id"] = $result[\'user_id\'];\n            $_SESSION["verification_email"] = $email;\n            $_SESSION["verification_username"] = $username;\n            \n            // Redirect to verification page\n            header("location: verify.php");\n        } else {\n            // Registration failed, display error message\n            $register_err = $result[\'message\'];\n        }\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Register - Student Platform</title>\n    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">\n    <link rel="stylesheet" href="css/style.css">\n</head>\n<body>\n    <div class="container">\n        <div class="row justify-content-center mt-5">\n            <div class="col-md-6">\n                <div class="card">\n                    <div class="card-header text-center">\n                        <h2>Sign Up</h2>\n                    </div>\n                    <div class="card-body">\n                        <?php \n                        if(isset($register_err)){\n                            echo \'<div class="alert alert-danger">\' . $register_err . \'</div>\';\n                        }        \n                        ?>\n                        <form id="registerForm" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>" method="post" class="auth-form">\n                            <div class="form-group">\n                                <label for="username">Username</label>\n                                <input type="text" name="username" id="username" class="form-control <?php echo (!empty($username_err)) ? \'is-invalid\' : \'\'; ?>" value="<?php echo $username; ?>">\n                                <span id="username_err" class="help-block"><?php echo $username_err; ?></span>\n                            </div>\n                            <div class="form-group">\n                                <label for="email">Email</label>\n                                <input type="email" name="email" id="email" class="form-control <?php echo (!empty($email_err)) ? \'is-invalid\' : \'\'; ?>" value="<?php echo $email; ?>">\n                                <span id="email_err" class="help-block"><?php echo $email_err; ?></span>\n                            </div>\n                            <div class="form-group">\n                                <label for="full_name">Full Name (Optional)</label>\n                                <input type="text" name="full_name" id="full_name" class="form-control" value="<?php echo $full_name; ?>">\n                            </div>    \n                            <div class="form-group">\n                                <label for="password">Password</label>\n                                <input type="password" name="password" id="password" class="form-control <?php echo (!empty($password_err)) ? \'is-invalid\' : \'\'; ?>">\n                                <span id="password_err" class="help-block"><?php echo $password_err; ?></span>\n                            </div>\n                            <div class="form-group">\n                                <label for="confirm_password">Confirm Password</label>\n                                <input type="password" name="confirm_password" id="confirm_password" class="form-control <?php echo (!empty($confirm_password_err)) ? \'is-invalid\' : \'\'; ?>">\n                                <span id="confirm_password_err" class="help-block"><?php echo $confirm_password_err; ?></span>\n                            </div>\n                            <div class="form-group">\n                                <input type="submit" class="btn btn-success btn-block" value="Sign Up">\n                            </div>\n                            <p class="text-center">Already have an account? <a href="login.php">Login here</a>.</p>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>\n    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>\n    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>\n    <script src="js/script.js"></script>\n</body>\n</html>\n</create-file>\n</function_calls>'}