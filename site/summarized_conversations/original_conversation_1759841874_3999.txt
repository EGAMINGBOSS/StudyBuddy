{'role': 'assistant', 'content': 'Now, let\'s create a profile page:\n\n<function_calls>\n<create-file file_path="website/StudentPlatform/profile.php">\n<?php\n// Initialize the session\nsession_start();\n\n// Check if the user is logged in, if not then redirect to login page\nif(!isset($_SESSION["loggedin"]) || $_SESSION["loggedin"] !== true) {\n    header("location: login.php");\n    exit;\n}\n\n// Include database connection\nrequire_once "config/database.php";\n\n// Define variables and initialize with empty values\n$new_password = $confirm_password = "";\n$new_password_err = $confirm_password_err = "";\n$success_message = $error_message = "";\n\n// Processing form data when form is submitted\nif($_SERVER["REQUEST_METHOD"] == "POST") {\n    \n    // Check which form was submitted\n    if(isset($_POST["update_password"])) {\n        // Validate new password\n        if(empty(trim($_POST["new_password"]))) {\n            $new_password_err = "Please enter the new password.";     \n        } elseif(strlen(trim($_POST["new_password"])) < 6) {\n            $new_password_err = "Password must have at least 6 characters.";\n        } else {\n            $new_password = trim($_POST["new_password"]);\n        }\n        \n        // Validate confirm password\n        if(empty(trim($_POST["confirm_password"]))) {\n            $confirm_password_err = "Please confirm the password.";\n        } else {\n            $confirm_password = trim($_POST["confirm_password"]);\n            if(empty($new_password_err) && ($new_password != $confirm_password)) {\n                $confirm_password_err = "Password did not match.";\n            }\n        }\n        \n        // Check input errors before updating the database\n        if(empty($new_password_err) && empty($confirm_password_err)) {\n            // Prepare an update statement\n            $conn = getDBConnection();\n            $sql = "UPDATE users SET password = ? WHERE id = ?";\n            \n            if($stmt = $conn->prepare($sql)) {\n                // Set parameters\n                $param_password = password_hash($new_password, PASSWORD_DEFAULT);\n                $param_id = $_SESSION["id"];\n                \n                // Bind variables to the prepared statement as parameters\n                $stmt->bind_param("si", $param_password, $param_id);\n                \n                // Attempt to execute the prepared statement\n                if($stmt->execute()) {\n                    // Password updated successfully. Display success message\n                    $success_message = "Your password has been updated successfully.";\n                    \n                    // Clear the form fields\n                    $new_password = $confirm_password = "";\n                } else {\n                    $error_message = "Oops! Something went wrong. Please try again later.";\n                }\n                \n                // Close statement\n                $stmt->close();\n            }\n            \n            // Close connection\n            $conn->close();\n        }\n    } elseif(isset($_POST["update_profile"])) {\n        // Handle profile update (full name, etc.)\n        $full_name = trim($_POST["full_name"]);\n        \n        $conn = getDBConnection();\n        $sql = "UPDATE users SET full_name = ? WHERE id = ?";\n        \n        if($stmt = $conn->prepare($sql)) {\n            // Set parameters\n            $param_full_name = $full_name;\n            $param_id = $_SESSION["id"];\n            \n            // Bind variables to the prepared statement as parameters\n            $stmt->bind_param("si", $param_full_name, $param_id);\n            \n            // Attempt to execute the prepared statement\n            if($stmt->execute()) {\n                // Profile updated successfully. Update session variable and display success message\n                $_SESSION["full_name"] = $full_name;\n                $success_message = "Your profile has been updated successfully.";\n            } else {\n                $error_message = "Oops! Something went wrong. Please try again later.";\n            }\n            \n            // Close statement\n            $stmt->close();\n        }\n        \n        // Close connection\n        $conn->close();\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Profile - Student Platform</title>\n    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">\n    <link rel="stylesheet" href="css/style.css">\n</head>\n<body>\n    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">\n        <div class="container">\n            <a class="navbar-brand" href="#">Student Platform</a>\n            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">\n                <span class="navbar-toggler-icon"></span>\n            </button>\n            <div class="collapse navbar-collapse" id="navbarNav">\n                <ul class="navbar-nav ml-auto">\n                    <li class="nav-item">\n                        <a class="nav-link" href="welcome.php">Home</a>\n                    </li>\n                    <li class="nav-item active">\n                        <a class="nav-link" href="profile.php">Profile</a>\n                    </li>\n                    <li class="nav-item">\n                        <a class="nav-link" href="logout.php">Logout</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </nav>\n\n    <div class="container mt-4">\n        <div class="row">\n            <div class="col-md-4">\n                <div class="card mb-4">\n                    <div class="card-body text-center">\n                        <img src="https://via.placeholder.com/150" class="profile-img" alt="Profile Picture">\n                        <h4><?php echo htmlspecialchars($_SESSION["username"]); ?></h4>\n                        <p class="text-muted"><?php echo !empty($_SESSION["full_name"]) ? htmlspecialchars($_SESSION["full_name"]) : "Student"; ?></p>\n                        <p class="text-muted"><?php echo htmlspecialchars($_SESSION["email"]); ?></p>\n                        <button class="btn btn-outline-primary btn-sm mt-2" data-toggle="modal" data-target="#uploadPhotoModal">\n                            <i class="fas fa-camera mr-1"></i> Change Photo\n                        </button>\n                    </div>\n                </div>\n                \n                <div class="card">\n                    <div class="card-header">\n                        <h5 class="mb-0">Account Settings</h5>\n                    </div>\n                    <div class="list-group list-group-flush">\n                        <a href="#" class="list-group-item list-group-item-action active" data-toggle="tab" data-target="#profile">\n                            <i class="fas fa-user mr-2"></i> Profile Information\n                        </a>\n                        <a href="#" class="list-group-item list-group-item-action" data-toggle="tab" data-target="#security">\n                            <i class="fas fa-lock mr-2"></i> Security\n                        </a>\n                        <a href="#" class="list-group-item list-group-item-action" data-toggle="tab" data-target="#preferences">\n                            <i class="fas fa-cog mr-2"></i> Preferences\n                        </a>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="col-md-8">\n                <?php \n                if(!empty($success_message)){\n                    echo \'<div class="alert alert-success">\' . $success_message . \'</div>\';\n                }\n                if(!empty($error_message)){\n                    echo \'<div class="alert alert-danger">\' . $error_message . \'</div>\';\n                }\n                ?>\n                \n                <div class="tab-content">\n                    <!-- Profile Information Tab -->\n                    <div class="tab-pane fade show active" id="profile">\n                        <div class="card">\n                            <div class="card-header">\n                                <h5 class="mb-0">Profile Information</h5>\n                            </div>\n                            <div class="card-body">\n                                <form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>" method="post">\n                                    <div class="form-group">\n                                        <label for="username">Username</label>\n                                        <input type="text" class="form-control" id="username" value="<?php echo htmlspecialchars($_SESSION["username"]); ?>" disabled>\n                                        <small class="form-text text-muted">Username cannot be changed.</small>\n                                    </div>\n                                    <div class="form-group">\n                                        <label for="email">Email</label>\n                                        <input type="email" class="form-control" id="email" value="<?php echo htmlspecialchars($_SESSION["email"]); ?>" disabled>\n                                        <small class="form-text text-muted">Email cannot be changed.</small>\n                                    </div>\n                                    <div class="form-group">\n                                        <label for="full_name">Full Name</label>\n                                        <input type="text" class="form-control" id="full_name" name="full_name" value="<?php echo !empty($_SESSION["full_name"]) ? htmlspecialchars($_SESSION["full_name"]) : ""; ?>">\n                                    </div>\n                                    <button type="submit" name="update_profile" class="btn btn-primary">Update Profile</button>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <!-- Security Tab -->\n                    <div class="tab-pane fade" id="security">\n                        <div class="card">\n                            <div class="card-header">\n                                <h5 class="mb-0">Change Password</h5>\n                            </div>\n                            <div class="card-body">\n                                <form action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>" method="post">\n                                    <div class="form-group">\n                                        <label for="new_password">New Password</label>\n                                        <input type="password" name="new_password" id="new_password" class="form-control <?php echo (!empty($new_password_err)) ? \'is-invalid\' : \'\'; ?>" value="<?php echo $new_password; ?>">\n                                        <span class="help-block"><?php echo $new_password_err; ?></span>\n                                    </div>\n                                    <div class="form-group">\n                                        <label for="confirm_password">Confirm Password</label>\n                                        <input type="password" name="confirm_password" id="confirm_password" class="form-control <?php echo (!empty($confirm_password_err)) ? \'is-invalid\' : \'\'; ?>">\n                                        <span class="help-block"><?php echo $confirm_password_err; ?></span>\n                                    </div>\n                                    <button type="submit" name="update_password" class="btn btn-primary">Change Password</button>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <!-- Preferences Tab -->\n                    <div class="tab-pane fade" id="preferences">\n                        <div class="card">\n                            <div class="card-header">\n                                <h5 class="mb-0">User Preferences</h5>\n                            </div>\n                            <div class="card-body">\n                                <form>\n                                    <div class="form-group">\n                                        <label for="theme">Theme</label>\n                                        <select class="form-control" id="theme">\n                                            <option value="light" selected>Light</option>\n                                            <option value="dark">Dark</option>\n                                        </select>\n                                    </div>\n                                    <div class="form-group">\n                                        <div class="custom-control custom-switch">\n                                            <input type="checkbox" class="custom-control-input" id="emailNotifications" checked>\n                                            <label class="custom-control-label" for="emailNotifications">Email Notifications</label>\n                                        </div>\n                                    </div>\n                                    <button type="submit" class="btn btn-primary">Save Preferences</button>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Upload Photo Modal -->\n    <div class="modal fade" id="uploadPhotoModal" tabindex="-1" role="dialog" aria-labelledby="uploadPhotoModalLabel" aria-hidden="true">\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title" id="uploadPhotoModalLabel">Upload Profile Photo</h5>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                    </button>\n                </div>\n                <div class="modal-body">\n                    <form>\n                        <div class="form-group">\n                            <label for="profilePhoto">Select Image</label>\n                            <input type="file" class="form-control-file" id="profilePhoto">\n                            <small class="form-text text-muted">Max file size: 2MB. Supported formats: JPG, PNG.</small>\n                        </div>\n                    </form>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n                    <button type="button" class="btn btn-primary">Upload</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <footer class="bg-light py-3 mt-5">\n        <div class="container text-center">\n            <p>&copy; <?php echo date("Y"); ?> Student Platform. All rights reserved.</p>\n        </div>\n    </footer>\n    \n    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>\n    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>\n    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>\n    <script src="js/script.js"></script>\n    <script>\n        // Handle tab navigation\n        $(document).ready(function() {\n            $(\'.list-group-item\').on(\'click\', function(e) {\n                e.preventDefault();\n                $(\'.list-group-item\').removeClass(\'active\');\n                $(this).addClass(\'active\');\n            });\n        });\n    </script>\n</body>\n</html>\n</create-file>\n</function_calls>'}